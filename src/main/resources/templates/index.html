<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Coffee Shop</title>
    <meta charset="UTF-8">
    <th:block th:insert="~{head::head-fragment}"/>

    <style>

        a[href="/"] {
            font-size: 2em;
            padding-right: 10px;
        }

        nav div {
            display: flex;
            justify-content: space-between;
            align-items:center;
        }

        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .search-container form {
            display:flex;
        }

        .search-container button {
            height: fit-content;
        }

        .user-information-container {
            display: flex;
            align-items: center;
            padding-bottom: 10px;
        }

        .links {
            display: flex;
            flex-direction: row;
            gap: 10px;
            padding-bottom: 10px;
        }

        .links a span {
            display: inline-block;
            padding: 10px 20px;
            background-color: #f2f2f2;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div th:fragment="header-fragment"></div>

<!-- Start Header -->
<div th:fragment="header-fragment">
    <nav>
        <div>
            <a th:href="@{/}">
                DN Cafe
            </a>

            <div>
                <ul>
                    <div class="search-container">
                        <form th:action="@{/search-product}" method="get">
                            <input type="text" id="inputMobileSearch" name="keyword"
                                   placeholder="Search ...">
                            <select name="category">
                                <option th:each="categoryOpt : ${T(com.dnlab.coffeeshop.product.common.Category).values()}"
                                        th:value="${categoryOpt}"
                                        th:text="${categoryOpt.getDisplayName()}"></option>
                            </select>
                            <button type="submit"><i>검색</i>
                            </button>
                        </form>
                    </div>
                </ul>
            </div>
            <div class="user-information-container">

                <a sec:authorize="isAuthenticated()">
                    <a th:href="@{/shopping-cart}">
                        <i></i>
                    </a>
                    <a th:href="@{/order-history-page}">
                        <i></i>
                    </a>

                    <p sec:authorize="isAuthenticated()"><span
                            th:text="'반갑습니다 '+${username}+'님'"></span></p>
                    <a th:href="@{/my-page}">
                        <span>마이페이지</span>
                    </a>

                    <a th:href="@{/logout}">
                        <span>로그아웃</span>
                    </a>
                </a>

                <a sec:authorize="isAnonymous()">
                    <a th:href="@{/login}">
                        <span>로그인</span>
                    </a>

                    <a th:href="@{/register}">
                        <span>회원가입</span>
                    </a>
                </a>
            </div>
        </div>
    </nav>
</div> <!-- End Header-->

<div class="links">

    <div>
        <a th:href="@{/add-supplier}">
            <span>공급업체 등록</span>
        </a>
    </div>
    <div>
        <a th:href="@{/add-product}">
            <span>상품 등록</span>
        </a>
    </div>
    <div>
        <a th:href="@{/add-ingredient}">
            <span>재료 등록</span>
        </a>
    </div>
</div>

<div class="links">
    <a th:href="@{/manage-product}">
        <span>등록 상품 관리</span>
    </a>
    <a th:href="@{/add-supply}">
        <span>재료 공급</span>
    </a>
    <a th:href="@{/history-supply}">
        <span>공급 내역</span>
    </a>
</div>

<div class="product-items">
    <div th:each="product : ${products}">
        <a th:href="@{/single-product/{seq}(seq =${product.getSeq()})}">
            <div class="product-summary">
                <strong th:text="${product.getName()}"></strong>
                <span th:text="${product.getPrice()} + '원'"></span>
            </div>
        </a>
    </div>
</div>
</body>
</html>